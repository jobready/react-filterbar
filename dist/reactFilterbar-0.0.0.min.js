!function e(t,a,n){function r(o,s){if(!a[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=a[o]={exports:{}};t[o][0].call(u.exports,function(e){var a=t[o][1][e];return r(a?a:e)},u,u.exports,e,t,a,n)}return a[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e){"use strict";var t=e("./components/filterbar.js.jsx");window.FilterBar=t},{"./components/filterbar.js.jsx":5}],2:[function(e,t){"use strict";var a=React.createClass({displayName:"ApplyConfigurationButton",render:function(){return React.createElement("button",{className:"btn btn-primary",onClick:this.props.onClick},React.createElement("i",{className:"icon icon-tick"}),"Apply")}});t.exports=a},{}],3:[function(e,t){"use strict";var a=React.createClass({displayName:"ClearConfigurationButton",render:function(){return React.createElement("button",{className:"btn btn-warning",onClick:this.props.onClick},React.createElement("i",{className:"icon icon-delete"}),"Clear")}});t.exports=a},{}],4:[function(e,t){"use strict";var a=React.createClass({displayName:"ConfigurationList",render:function(){var e=this.props.configurations.map(function(e){return React.createElement(a.Configuration,{configuration:e,onClick:this.props.loadConfiguration})},this);return 0!==e.length?React.createElement("div",{className:"btn-group margin-bottom-sm"},React.createElement("div",{className:"btn-group"},React.createElement("button",{className:"btn btn-default dropdown-toggle","data-toggle":"dropdown",type:"button","aria-expanded":"false"},React.createElement("i",{className:"icon icon-save"}),"Saved Searches",React.createElement("i",{className:"icon icon-chevron-down"})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},e)),React.createElement("button",{type:"button",className:"btn btn-danger"},React.createElement("i",{className:"icon icon-delete"}))):React.createElement("div",{className:"btn-group margin-bottom-sm"},React.createElement("div",{className:"btn-group"},React.createElement("button",{className:"btn btn-default dropdown-toggle disabled","data-toggle":"dropdown",type:"button","aria-expanded":"false"},React.createElement("i",{className:"icon icon-save"}),"Saved Searches",React.createElement("i",{className:"icon icon-chevron-down"})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},e)),React.createElement("button",{type:"button",className:"btn btn-danger"},React.createElement("i",{className:"icon icon-delete"})))}});a.Configuration=React.createClass({displayName:"Configuration",onClick:function(){this.props.onClick(this.props.configuration.configuration)},render:function(){return React.createElement("li",null,React.createElement("a",{className:"dynamic-text-filter",onClick:this.onClick},this.props.configuration.name))}}),t.exports=a},{}],5:[function(e,t){"use strict";var a=e("./filterlist.js.jsx"),n=e("./applyconfigurationbutton.js.jsx"),r=e("./clearconfigurationbutton.js.jsx"),i=e("./saveconfigurationbutton.js.jsx"),o=e("./configurationlist.js.jsx"),s=e("./filterdisplay.js.jsx"),l=React.createClass({displayName:"FilterBar",getInitialState:function(){return{filters:[],configurations:[]}},componentDidMount:function(){var e=window.filterList.map(function(e){return e.enabled=!1,e.query_string="q["+e.type+"]["+e.field+"]",e});this.loadConfigurations(),this.setState({filters:e})},loadConfigurations:function(){var e=[];$.ajax({url:this.props.configurations_url,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){for(var a in t){var n=t[a].name,r=JSON.parse(t[a].configuration);e.push({name:n,configuration:r})}this.setState({configurations:e})}.bind(this),error:function(e){var t=function(){return e.apply(this,arguments)};return t.toString=function(){return e.toString()},t}(function(e,t,a){console.error(e),console.error(t),console.error(a)})})},loadConfiguration:function(e){this.clearConfiguration(),e=$.extend(!0,[],e);var t=this.state.filters.slice(0),a=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value,l=!0,c=!1,u=void 0;try{for(var p,f=t[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var d=p.value;s.uid===d.uid&&(d.value=s.value,this.setState({filters:t}),this.enableFilter(d))}}catch(m){c=!0,u=m}finally{try{!l&&f["return"]&&f["return"]()}finally{if(c)throw u}}}}catch(m){n=!0,r=m}finally{try{!a&&o["return"]&&o["return"]()}finally{if(n)throw r}}this.applyConfiguration()},saveConfiguration:function(e){var t=this.state.filters.filter(function(e){return e.enabled===!0&&Object.keys(0!==e.value)}),a=t.map(function(e){return filterConfig={},filterConfig.uid=e.uid,filterConfig.value=e.value,filterConfig}),n={saved_search:{search_title:e,filters:a}};$.ajax({url:this.props.configurations_url,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(n),dataType:"script",success:function(){this.loadConfigurations(),this.applyConfiguration()}.bind(this),error:function(e){var t=function(){return e.apply(this,arguments)};return t.toString=function(){return e.toString()},t}(function(e,t,a){console.error(e),console.error(t),console.error(a)})})},applyConfiguration:function(){var e=this.state.filters.filter(function(e){return e.enabled===!0&&Object.keys(0!==e.value)}),t=e.map(function(e){var t={};t[e.query_string]=e.value;var a=$.param(t);return a}),a=t.join("&");$.ajax({url:this.props.resource_url+"?"+a,type:"GET",contentType:"application/json; charset=utf-8",dataType:"script",success:function(){},error:function(e){var t=function(){return e.apply(this,arguments)};return t.toString=function(){return e.toString()},t}(function(e,t,a){console.error(e),console.error(t),console.error(a)})})},clearConfiguration:function(){var e=this.state.filters.slice(0),t=!0,a=!1,n=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.disableFilter(o)}}catch(s){a=!0,n=s}finally{try{!t&&i["return"]&&i["return"]()}finally{if(a)throw n}}this.applyConfiguration()},enableFilter:function(e){var t=this.state.filters.slice(0);for(var a in t)if(t[a].uid==e.uid){t[a].enabled=!0;break}this.setState({filters:t})},disableFilter:function(e){var t=this.state.filters.slice(0);for(var a in t)if(t[a].uid==e.uid){t[a].enabled=!1,t[a].value=null;break}this.setState({filters:t})},updateFilter:function(e){var t=this.state.filters.slice(0);for(var a in t)if(t[a].uid===e.uid){t[a].value=e.value,t[a].query_string=e.query_string;break}this.setState({filters:t})},render:function(){return React.createElement("div",null,React.createElement("div",{className:"btn-group margin-bottom-sm"},React.createElement(a,{filters:this.state.filters,enableFilter:this.enableFilter}),React.createElement("button",{type:"button",className:"btn btn-default disabled"},React.createElement("i",{className:"icon icon-download"}),"Export CSV"),React.createElement(n,{onClick:this.applyConfiguration}),React.createElement(r,{onClick:this.clearConfiguration})),React.createElement(i,{onClick:this.saveConfiguration,onChange:this.updateConfigurationName}),React.createElement(o,{configurations:this.state.configurations,loadConfiguration:this.loadConfiguration}),React.createElement(s,{filters:this.state.filters,disableFilter:this.disableFilter,updateFilter:this.updateFilter}))}});t.exports=l},{"./applyconfigurationbutton.js.jsx":2,"./clearconfigurationbutton.js.jsx":3,"./configurationlist.js.jsx":4,"./filterdisplay.js.jsx":6,"./filterlist.js.jsx":7,"./saveconfigurationbutton.js.jsx":11}],6:[function(e,t){"use strict";var a=e("./inputs/textinput.js.jsx"),n=e("./inputs/dateinput.js.jsx"),r=e("./inputs/selectinput.js.jsx"),i=React.createClass({displayName:"FilterDisplay",render:function(){var e=[],t=this.props.filters.filter(function(e){return e.enabled===!0});return e=0!==t.length?t.map(function(e){return e.enabled===!0?React.createElement(i.Filter,{filter:e,disableFilter:this.props.disableFilter,updateFilter:this.props.updateFilter}):void 0},this):React.createElement("div",null,"No Filters Enabled"),React.createElement("div",{className:"navbar filterbar"},React.createElement("div",{className:"panel panel-default",id:"filters"},e))}});i.Filter=React.createClass({displayName:"Filter",disableFilter:function(){this.props.disableFilter(this.props.filter)},render:function(){var e=React.createElement(i.Filter.Inputs,{filter:this.props.filter,updateFilter:this.props.updateFilter});return React.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-12 filter"},React.createElement("ul",{className:this.props.filter.uid},React.createElement("li",null,React.createElement("i",{onClick:this.disableFilter,className:"btn btn-circle-primary btn-xs icon icon-close remove-filter"}),React.createElement("label",null,this.props.filter.label)),e))}}),i.Filter.Inputs=React.createClass({displayName:"Inputs",inputFactory:function(){var e=this.props.filter.type;return"text"==e||"id"==e?React.createElement(a,{filter:this.props.filter,onChange:this.props.updateFilter}):"date"==e?React.createElement(n,{filter:this.props.filter,onChange:this.props.updateFilter}):"select"==e?React.createElement(r,{filter:this.props.filter,onChange:this.props.updateFilter}):"age_select"==e?React.createElement(o,{filter:this.props.filter,onChange:this.props.updateFilter}):void console.error("Not implemented yet!")},render:function(){var e=this.inputFactory();return e}});var o=React.createClass({displayName:"AgeSelectInput",getInitialState:function(){return{selected:this.props.filter.value||"0,15"}},componentDidMount:function(){var e=$.extend(!0,{},this.props.filter);e.value=this.state.selected,this.props.onChange(e)},onChange:function(e){var t=$.extend(!0,{},this.props.filter);t.value=e.target.value,this.setState({selected:e.target.value}),this.props.onChange(t)},render:function(){return React.createElement("li",null,React.createElement("select",{className:"form-control",selected:this.state.selected,onChange:this.onChange},React.createElement("option",{value:"0,15"},"15 and under"),React.createElement("option",{value:"16,24"},"16 - 24"),React.createElement("option",{value:"25,34"},"25 - 34"),React.createElement("option",{value:"35,44"},"35 - 44"),React.createElement("option",{value:"45,54"},"45 - 54"),React.createElement("option",{value:"55,64"},"55 - 64"),React.createElement("option",{value:"65,74"},"65 - 74"),React.createElement("option",{value:"75,100"},"75 and over")))}});t.exports=i},{"./inputs/dateinput.js.jsx":8,"./inputs/selectinput.js.jsx":9,"./inputs/textinput.js.jsx":10}],7:[function(e,t){"use strict";var a=React.createClass({displayName:"FilterList",render:function(){var e=this.props.filters.map(function(e){return e.enabled===!1?React.createElement(a.FilterOption,{filter:e,onClick:this.props.enableFilter}):void 0},this);return React.createElement("div",{className:"btn-group"},React.createElement("button",{className:"btn btn-default dropdown-toggle","data-toggle":"dropdown",type:"button"},React.createElement("i",{className:"icon icon-add"}),"Add Filter",React.createElement("i",{className:"icon icon-chevron-down"})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},e))}});a.FilterOption=React.createClass({displayName:"FilterOption",onClick:function(){this.props.onClick(this.props.filter)},render:function(){return React.createElement("li",null,React.createElement("a",{onClick:this.onClick},this.props.filter.label))}}),t.exports=a},{}],8:[function(e,t){"use strict";var a=React.createClass({displayName:"DateInput",getInitialState:function(){return this.props.filter.value?{from:this.props.filter.value.from,to:this.props.filter.value.to}:{from:"",to:""}},onChange:function(e){var t=$.extend(!0,{},this.props.filter),a=t.value||{},n=this.state,r=e.date.format("DD-MM-YYYY");e.target.classList.contains("dateRangeFrom")?(n.from=r,a.from=r):e.target.classList.contains("dateRangeTo")&&(n.to=r,a.to=r),t.value=a,this.setState(n),this.props.onChange(t)},componentDidMount:function(){var e=$(React.findDOMNode(this.refs.dateRangeFrom));e.datetimepicker({format:"DD-MM-YYYY"}),e.datetimepicker().on("dp.change",this.onChange);var t=$(React.findDOMNode(this.refs.dateRangeTo));t.datetimepicker({format:"DD-MM-YYYY"}),t.datetimepicker().on("dp.change",this.onChange)},render:function(){return React.createElement("li",null,React.createElement("div",{className:"input-group datepicker dateRangeFrom",ref:"dateRangeFrom"},React.createElement("input",{className:"form-control",type:"text","data-date-format":"DD/MM/YYYY","aria-required":"true",placeholder:"from",onChange:this.onChange,value:this.state.from}),React.createElement("span",{className:"input-group-addon"},React.createElement("span",{className:"icon-calendar icon","aria-hidden":"true"}),React.createElement("span",{className:"sr-only icon icon-calendar"},"Calendar"))),React.createElement("div",{className:"input-group datepicker dateRangeTo",ref:"dateRangeTo"},React.createElement("input",{className:"form-control",type:"text","data-date-format":"DD/MM/YYYY","aria-required":"true",placeholder:"to",onChange:this.onChange,value:this.state.to}),React.createElement("span",{className:"input-group-addon"},React.createElement("span",{className:"icon-calendar icon","aria-hidden":"true"}),React.createElement("span",{className:"sr-only icon icon-calendar"},"Calendar"))))}});t.exports=a},{}],9:[function(e,t){"use strict";var a=React.createClass({displayName:"SelectInput",getInitialState:function(){return{selected:this.props.filter.value||this.props.filter.selections[0][0]}},componentDidMount:function(){var e=$.extend(!0,{},this.props.filter);e.value=this.state.selected,this.props.onChange(e)},onChange:function(e){var t=$.extend(!0,{},this.props.filter);t.value=e.target.value,this.setState({selected:e.target.value}),this.props.onChange(t)},render:function(){var e=this.props.filter.selections.map(function(e){return React.createElement("option",{value:e[0]},e[1])});return React.createElement("li",null,React.createElement("select",{className:"form-control",selected:this.state.selected,onChange:this.onChange},e))}});t.exports=a},{}],10:[function(e,t){"use strict";var a=React.createClass({displayName:"TextInput",getInitialState:function(){return{value:this.props.filter.value||""}},onChange:function(e){var t=$.extend(!0,{},this.props.filter);t.value=e.target.value,this.setState({value:e.target.value}),this.props.onChange(t)},render:function(){return React.createElement("li",null,React.createElement("input",{className:"form-control",type:"text",value:this.state.value,onChange:this.onChange}))}});t.exports=a},{}],11:[function(e,t){"use strict";var a=React.createClass({displayName:"SaveConfigurationButton",onClick:function(){this.props.onClick(this.state.configurationName)},onChange:function(e){this.setState({configurationName:e.target.value})},getInitialState:function(){return{configurationName:""}},render:function(){return React.createElement(ReactBootstrap.DropdownButton,{title:"Save Search",type:"button",bsStyle:"default",className:"btn btn-default margin-bottom-sm"},React.createElement(ReactBootstrap.MenuItem,{eventKey:"1"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Search Title"),React.createElement("input",{className:"form-control",value:this.state.configurationName,type:"text",onChange:this.onChange})),React.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.onClick},"Save")))}});t.exports=a},{}]},{},[1]);